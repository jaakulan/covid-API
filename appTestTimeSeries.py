import requests
from flask.wrappers import Response
import unittest
from app import app

"""


URL = 'https://uoftcovidapi.herokuapp.com/timeSeries'
SHRUNK_URL = 'https://uoftcovidapi.herokuapp.com'
"""
URL = 'http://127.0.0.1:5000/timeSeries'
SHRUNK_URL = 'http://127.0.0.1:5000'

q_setup = False


class FlaskTest(unittest.TestCase):
    q_setup = False

    #test if data is posted correctly and can be viewed for one date and for the db recovered
    def test_post_one_date_recovered(self):
        files = {'file': open('./csvExamplesTS/one-date.csv', 'rb')}
        tester = app.test_client(self)
        response = requests.post(URL+'/addNewCSV?type=recovered', files=files)
        response = requests.get(URL+'/viewAll?type=recovered&file=json')
        files.get('file').close()
        correctText = '[{"combined": " NewSouthWalesAustralia ", " 1/22/20 ": null}, {"combined": " NorthernTerritoryAustralia ", " 1/22/20 ": null}, {"combined": " QueenslandAustralia ", " 1/22/20 ": null}, {"combined": " SouthAustraliaAustralia ", " 1/22/20 ": null}, {"combined": " TasmaniaAustralia ", " 1/22/20 ": null}, {"combined": " VictoriaAustralia ", " 1/22/20 ": null}, {"combined": " WesternAustraliaAustralia ", " 1/22/20 ": null}, {"combined": " Austria ", " 1/22/20 ": null}, {"combined": " Azerbaijan ", " 1/22/20 ": null}, {"combined": " Bahamas ", " 1/22/20 ": null}, {"combined": " Bahrain ", " 1/22/20 ": null}, {"combined": " Bangladesh ", " 1/22/20 ": null}, {"combined": " Barbados ", " 1/22/20 ": null}, {"combined": " Belarus ", " 1/22/20 ": null}, {"combined": " Belgium ", " 1/22/20 ": null}, {"combined": " Belize ", " 1/22/20 ": null}, {"combined": " Benin ", " 1/22/20 ": null}, {"combined": " Bhutan ", " 1/22/20 ": null}, {"combined": " Bolivia ", " 1/22/20 ": null}, {"combined": " BosniaandHerzegovina ", " 1/22/20 ": null}, {"combined": " Botswana ", " 1/22/20 ": null}, {"combined": " Brazil ", " 1/22/20 ": null}, {"combined": " Brunei ", " 1/22/20 ": null}, {"combined": " Bulgaria ", " 1/22/20 ": null}, {"combined": " BurkinaFaso ", " 1/22/20 ": null}, {"combined": " Burma ", " 1/22/20 ": null}, {"combined": " Burundi ", " 1/22/20 ": null}, {"combined": " CaboVerde ", " 1/22/20 ": null}, {"combined": " Cambodia ", " 1/22/20 ": null}, {"combined": " Cameroon ", " 1/22/20 ": null}, {"combined": " AlbertaCanada ", " 1/22/20 ": null}, {"combined": " BritishColumbiaCanada ", " 1/22/20 ": null}, {"combined": " DiamondPrincessCanada ", " 1/22/20 ": null}, {"combined": " GrandPrincessCanada ", " 1/22/20 ": null}, {"combined": " ManitobaCanada ", " 1/22/20 ": null}, {"combined": " NewBrunswickCanada ", " 1/22/20 ": null}, {"combined": " NewfoundlandandLabradorCanada ", " 1/22/20 ": null}, {"combined": " NorthwestTerritoriesCanada ", " 1/22/20 ": null}, {"combined": " NovaScotiaCanada ", " 1/22/20 ": null}, {"combined": " NunavutCanada ", " 1/22/20 ": null}, {"combined": " OntarioCanada ", " 1/22/20 ": null}, {"combined": " PrinceEdwardIslandCanada ", " 1/22/20 ": null}, {"combined": " QuebecCanada ", " 1/22/20 ": null}, {"combined": " RepatriatedTravellersCanada ", " 1/22/20 ": null}, {"combined": " SaskatchewanCanada ", " 1/22/20 ": null}, {"combined": " YukonCanada ", " 1/22/20 ": null}, {"combined": " CentralAfricanRepublic ", " 1/22/20 ": null}, {"combined": " Chad ", " 1/22/20 ": null}, {"combined": " Chile ", " 1/22/20 ": null}, {"combined": " AnhuiChina ", " 1/22/20 ": null}, {"combined": " BeijingChina ", " 1/22/20 ": null}, {"combined": " ChongqingChina ", " 1/22/20 ": null}, {"combined": " FujianChina ", " 1/22/20 ": null}, {"combined": " GansuChina ", " 1/22/20 ": null}, {"combined": " GuangdongChina ", " 1/22/20 ": null}, {"combined": " GuangxiChina ", " 1/22/20 ": null}, {"combined": " GuizhouChina ", " 1/22/20 ": null}, {"combined": " HainanChina ", " 1/22/20 ": null}, {"combined": " HebeiChina ", " 1/22/20 ": null}, {"combined": " HeilongjiangChina ", " 1/22/20 ": null}, {"combined": " HenanChina ", " 1/22/20 ": null}, {"combined": " HongKongChina ", " 1/22/20 ": null}, {"combined": " HubeiChina ", " 1/22/20 ": null}, {"combined": " HunanChina ", " 1/22/20 ": null}, {"combined": " InnerMongoliaChina ", " 1/22/20 ": null}, {"combined": " JiangsuChina ", " 1/22/20 ": null}, {"combined": " JiangxiChina ", " 1/22/20 ": null}, {"combined": " JilinChina ", " 1/22/20 ": null}, {"combined": " LiaoningChina ", " 1/22/20 ": null}, {"combined": " MacauChina ", " 1/22/20 ": null}, {"combined": " NingxiaChina ", " 1/22/20 ": null}, {"combined": " QinghaiChina ", " 1/22/20 ": null}, {"combined": " ShaanxiChina ", " 1/22/20 ": null}, {"combined": " ShandongChina ", " 1/22/20 ": null}, {"combined": " ShanghaiChina ", " 1/22/20 ": null}, {"combined": " ShanxiChina ", " 1/22/20 ": null}, {"combined": " SichuanChina ", " 1/22/20 ": null}, {"combined": " TianjinChina ", " 1/22/20 ": null}, {"combined": " TibetChina ", " 1/22/20 ": null}, {"combined": " UnknownChina ", " 1/22/20 ": null}, {"combined": " XinjiangChina ", " 1/22/20 ": null}, {"combined": " YunnanChina ", " 1/22/20 ": null}, {"combined": " ZhejiangChina ", " 1/22/20 ": null}, {"combined": " Colombia ", " 1/22/20 ": null}, {"combined": " Comoros ", " 1/22/20 ": null}, {"combined": " CongoBrazzaville ", " 1/22/20 ": null}, {"combined": " CongoKinshasa ", " 1/22/20 ": null}, {"combined": " CostaRica ", " 1/22/20 ": null}, {"combined": " CotedIvoire ", " 1/22/20 ": null}, {"combined": " Croatia ", " 1/22/20 ": null}, {"combined": " Cuba ", " 1/22/20 ": null}, {"combined": " Cyprus ", " 1/22/20 ": null}, {"combined": " Czechia ", " 1/22/20 ": null}, {"combined": " FaroeIslandsDenmark ", " 1/22/20 ": null}, {"combined": " GreenlandDenmark ", " 1/22/20 ": null}, {"combined": " Denmark ", " 1/22/20 ": null}, {"combined": " DiamondPrincess ", " 1/22/20 ": null}, {"combined": " Djibouti ", " 1/22/20 ": null}, {"combined": " Dominica ", " 1/22/20 ": null}, {"combined": " DominicanRepublic ", " 1/22/20 ": null}, {"combined": " Ecuador ", " 1/22/20 ": null}, {"combined": " Egypt ", " 1/22/20 ": null}, {"combined": " ElSalvador ", " 1/22/20 ": null}, {"combined": " EquatorialGuinea ", " 1/22/20 ": null}, {"combined": " Eritrea ", " 1/22/20 ": null}, {"combined": " Estonia ", " 1/22/20 ": null}, {"combined": " Eswatini ", " 1/22/20 ": null}, {"combined": " Ethiopia ", " 1/22/20 ": null}, {"combined": " Fiji ", " 1/22/20 ": null}, {"combined": " Finland ", " 1/22/20 ": null}, {"combined": " FrenchGuianaFrance ", " 1/22/20 ": null}, {"combined": " FrenchPolynesiaFrance ", " 1/22/20 ": null}, {"combined": " GuadeloupeFrance ", " 1/22/20 ": null}, {"combined": " MartiniqueFrance ", " 1/22/20 ": null}, {"combined": " MayotteFrance ", " 1/22/20 ": null}, {"combined": " NewCaledoniaFrance ", " 1/22/20 ": null}, {"combined": " ReunionFrance ", " 1/22/20 ": null}, {"combined": " SaintBarthelemyFrance ", " 1/22/20 ": null}, {"combined": " SaintPierreandMiquelonFrance ", " 1/22/20 ": null}, {"combined": " StMartinFrance ", " 1/22/20 ": null}, {"combined": " WallisandFutunaFrance ", " 1/22/20 ": null}, {"combined": " France ", " 1/22/20 ": null}, {"combined": " Gabon ", " 1/22/20 ": null}, {"combined": " Gambia ", " 1/22/20 ": null}, {"combined": " Georgia ", " 1/22/20 ": null}, {"combined": " Germany ", " 1/22/20 ": null}, {"combined": " Ghana ", " 1/22/20 ": null}, {"combined": " Greece ", " 1/22/20 ": null}, {"combined": " Grenada ", " 1/22/20 ": null}, {"combined": " Guatemala ", " 1/22/20 ": null}, {"combined": " Guinea ", " 1/22/20 ": null}, {"combined": " GuineaBissau ", " 1/22/20 ": null}, {"combined": " Guyana ", " 1/22/20 ": null}, {"combined": " Haiti ", " 1/22/20 ": null}, {"combined": " HolySee ", " 1/22/20 ": null}, {"combined": " Honduras ", " 1/22/20 ": null}, {"combined": " Hungary ", " 1/22/20 ": null}, {"combined": " Iceland ", " 1/22/20 ": null}, {"combined": " India ", " 1/22/20 ": null}, {"combined": " Indonesia ", " 1/22/20 ": null}, {"combined": " Iran ", " 1/22/20 ": null}, {"combined": " Iraq ", " 1/22/20 ": null}, {"combined": " Ireland ", " 1/22/20 ": null}, {"combined": " Israel ", " 1/22/20 ": null}, {"combined": " Italy ", " 1/22/20 ": null}, {"combined": " Jamaica ", " 1/22/20 ": null}, {"combined": " Japan ", " 1/22/20 ": null}, {"combined": " Jordan ", " 1/22/20 ": null}, {"combined": " Kazakhstan ", " 1/22/20 ": null}, {"combined": " Kenya ", " 1/22/20 ": null}, {"combined": " Kiribati ", " 1/22/20 ": null}, {"combined": " KoreaSouth ", " 1/22/20 ": null}, {"combined": " Kosovo ", " 1/22/20 ": null}, {"combined": " Kuwait ", " 1/22/20 ": null}, {"combined": " Kyrgyzstan ", " 1/22/20 ": null}, {"combined": " Laos ", " 1/22/20 ": null}, {"combined": " Latvia ", " 1/22/20 ": null}, {"combined": " Lebanon ", " 1/22/20 ": null}, {"combined": " Lesotho ", " 1/22/20 ": null}, {"combined": " Liberia ", " 1/22/20 ": null}, {"combined": " Libya ", " 1/22/20 ": null}, {"combined": " Liechtenstein ", " 1/22/20 ": null}, {"combined": " Lithuania ", " 1/22/20 ": null}, {"combined": " Luxembourg ", " 1/22/20 ": null}, {"combined": " MSZaandam ", " 1/22/20 ": null}, {"combined": " Madagascar ", " 1/22/20 ": null}, {"combined": " Malawi ", " 1/22/20 ": null}, {"combined": " Malaysia ", " 1/22/20 ": null}, {"combined": " Maldives ", " 1/22/20 ": null}, {"combined": " Mali ", " 1/22/20 ": null}, {"combined": " Malta ", " 1/22/20 ": null}, {"combined": " MarshallIslands ", " 1/22/20 ": null}, {"combined": " Mauritania ", " 1/22/20 ": null}, {"combined": " Mauritius ", " 1/22/20 ": null}, {"combined": " Mexico ", " 1/22/20 ": null}, {"combined": " Micronesia ", " 1/22/20 ": null}, {"combined": " Moldova ", " 1/22/20 ": null}, {"combined": " Monaco ", " 1/22/20 ": null}, {"combined": " Mongolia ", " 1/22/20 ": null}, {"combined": " Montenegro ", " 1/22/20 ": null}, {"combined": " Morocco ", " 1/22/20 ": null}, {"combined": " Mozambique ", " 1/22/20 ": null}, {"combined": " Namibia ", " 1/22/20 ": null}, {"combined": " Nepal ", " 1/22/20 ": null}, {"combined": " ArubaNetherlands ", " 1/22/20 ": null}, {"combined": " BonaireSintEustatiusandSabaNetherlands ", " 1/22/20 ": null}, {"combined": " CuracaoNetherlands ", " 1/22/20 ": null}, {"combined": " SintMaartenNetherlands ", " 1/22/20 ": null}, {"combined": " Netherlands ", " 1/22/20 ": null}, {"combined": " CookIslandsNewZealand ", " 1/22/20 ": null}, {"combined": " NewZealand ", " 1/22/20 ": null}, {"combined": " Nicaragua ", " 1/22/20 ": null}, {"combined": " Niger ", " 1/22/20 ": null}, {"combined": " Nigeria ", " 1/22/20 ": null}, {"combined": " NorthMacedonia ", " 1/22/20 ": null}, {"combined": " Norway ", " 1/22/20 ": null}, {"combined": " Oman ", " 1/22/20 ": null}, {"combined": " Pakistan ", " 1/22/20 ": null}, {"combined": " Palau ", " 1/22/20 ": null}, {"combined": " Panama ", " 1/22/20 ": null}, {"combined": " PapuaNewGuinea ", " 1/22/20 ": null}, {"combined": " Paraguay ", " 1/22/20 ": null}, {"combined": " Peru ", " 1/22/20 ": null}, {"combined": " Philippines ", " 1/22/20 ": null}, {"combined": " Poland ", " 1/22/20 ": null}, {"combined": " Portugal ", " 1/22/20 ": null}, {"combined": " Qatar ", " 1/22/20 ": null}, {"combined": " Romania ", " 1/22/20 ": null}, {"combined": " Russia ", " 1/22/20 ": null}, {"combined": " Rwanda ", " 1/22/20 ": null}, {"combined": " SaintKittsandNevis ", " 1/22/20 ": null}, {"combined": " SaintLucia ", " 1/22/20 ": null}, {"combined": " SaintVincentandtheGrenadines ", " 1/22/20 ": null}, {"combined": " Samoa ", " 1/22/20 ": null}, {"combined": " SanMarino ", " 1/22/20 ": null}, {"combined": " SaoTomeandPrincipe ", " 1/22/20 ": null}, {"combined": " SaudiArabia ", " 1/22/20 ": null}, {"combined": " Senegal ", " 1/22/20 ": null}, {"combined": " Serbia ", " 1/22/20 ": null}, {"combined": " Seychelles ", " 1/22/20 ": null}, {"combined": " SierraLeone ", " 1/22/20 ": null}, {"combined": " Singapore ", " 1/22/20 ": null}, {"combined": " Slovakia ", " 1/22/20 ": null}, {"combined": " Slovenia ", " 1/22/20 ": null}, {"combined": " SolomonIslands ", " 1/22/20 ": null}, {"combined": " Somalia ", " 1/22/20 ": null}, {"combined": " SouthAfrica ", " 1/22/20 ": null}, {"combined": " SouthSudan ", " 1/22/20 ": null}, {"combined": " Spain ", " 1/22/20 ": null}, {"combined": " SriLanka ", " 1/22/20 ": null}, {"combined": " Sudan ", " 1/22/20 ": null}, {"combined": " SummerOlympics2020 ", " 1/22/20 ": null}, {"combined": " Suriname ", " 1/22/20 ": null}, {"combined": " Sweden ", " 1/22/20 ": null}, {"combined": " Switzerland ", " 1/22/20 ": null}, {"combined": " Syria ", " 1/22/20 ": null}, {"combined": " Taiwan ", " 1/22/20 ": null}, {"combined": " Tajikistan ", " 1/22/20 ": null}, {"combined": " Tanzania ", " 1/22/20 ": null}, {"combined": " Thailand ", " 1/22/20 ": null}, {"combined": " TimorLeste ", " 1/22/20 ": null}, {"combined": " Togo ", " 1/22/20 ": null}, {"combined": " Tonga ", " 1/22/20 ": null}, {"combined": " TrinidadandTobago ", " 1/22/20 ": null}, {"combined": " Tunisia ", " 1/22/20 ": null}, {"combined": " Turkey ", " 1/22/20 ": null}, {"combined": " US ", " 1/22/20 ": null}, {"combined": " Uganda ", " 1/22/20 ": null}, {"combined": " Ukraine ", " 1/22/20 ": null}, {"combined": " UnitedArabEmirates ", " 1/22/20 ": null}, {"combined": " AnguillaUnitedKingdom ", " 1/22/20 ": null}, {"combined": " BermudaUnitedKingdom ", " 1/22/20 ": null}, {"combined": " BritishVirginIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " CaymanIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " ChannelIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " FalklandIslandsMalvinasUnitedKingdom ", " 1/22/20 ": null}, {"combined": " GibraltarUnitedKingdom ", " 1/22/20 ": null}, {"combined": " IsleofManUnitedKingdom ", " 1/22/20 ": null}, {"combined": " MontserratUnitedKingdom ", " 1/22/20 ": null}, {"combined": " SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", " 1/22/20 ": null}, {"combined": " TurksandCaicosIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " UnitedKingdom ", " 1/22/20 ": null}, {"combined": " Uruguay ", " 1/22/20 ": null}, {"combined": " Uzbekistan ", " 1/22/20 ": null}, {"combined": " Vanuatu ", " 1/22/20 ": null}, {"combined": " Venezuela ", " 1/22/20 ": null}, {"combined": " Vietnam ", " 1/22/20 ": null}, {"combined": " WestBankandGaza ", " 1/22/20 ": null}, {"combined": " Yemen ", " 1/22/20 ": null}, {"combined": " Zambia ", " 1/22/20 ": null}, {"combined": " Zimbabwe ", " 1/22/20 ": null}, {"combined": " Afghanistan ", " 1/22/20 ": 0}, {"combined": " Albania ", " 1/22/20 ": 0}, {"combined": " Algeria ", " 1/22/20 ": 0}, {"combined": " Andorra ", " 1/22/20 ": 0}, {"combined": " Angola ", " 1/22/20 ": 0}, {"combined": " AntiguaandBarbuda ", " 1/22/20 ": 0}, {"combined": " Argentina ", " 1/22/20 ": 0}, {"combined": " Armenia ", " 1/22/20 ": 0}, {"combined": " AustralianCapitalTerritoryAustralia ", " 1/22/20 ": 0}]'
        self.assertEqual(correctText, response.text, "Should be "+ correctText)

    #test if data is posted correctly and can be viewed for many dates and for the db recovered
    def test_post_multiple_dates_recovered(self):
        files = {'file': open('./csvExamplesTS/two-date.csv', 'rb')}
        tester = app.test_client(self)
        response = requests.post(URL+'/addNewCSV?type=recovered', files=files)
        response = requests.get(URL+'/viewAll?type=recovered&file=json')
        files.get('file').close()
        correctText = '[{"combined": " NewSouthWalesAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthernTerritoryAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QueenslandAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthAustraliaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TasmaniaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " VictoriaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WesternAustraliaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Austria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Azerbaijan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bahamas ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bahrain ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bangladesh ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Barbados ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belarus ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belgium ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belize ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Benin ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bhutan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bolivia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BosniaandHerzegovina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Botswana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Brazil ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Brunei ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bulgaria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BurkinaFaso ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Burma ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Burundi ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CaboVerde ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cambodia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cameroon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AlbertaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BritishColumbiaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DiamondPrincessCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GrandPrincessCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ManitobaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewBrunswickCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewfoundlandandLabradorCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthwestTerritoriesCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NovaScotiaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NunavutCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " OntarioCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " PrinceEdwardIslandCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QuebecCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " RepatriatedTravellersCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaskatchewanCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " YukonCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CentralAfricanRepublic ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Chad ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Chile ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AnhuiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BeijingChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ChongqingChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FujianChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GansuChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuangdongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuangxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuizhouChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HainanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HebeiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HeilongjiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HenanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HongKongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HubeiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HunanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " InnerMongoliaChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JiangsuChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JiangxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JilinChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " LiaoningChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MacauChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NingxiaChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QinghaiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShaanxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShandongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShanghaiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShanxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SichuanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TianjinChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TibetChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnknownChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " XinjiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " YunnanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ZhejiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Colombia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Comoros ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CongoBrazzaville ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CongoKinshasa ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CostaRica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CotedIvoire ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Croatia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cuba ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cyprus ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Czechia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FaroeIslandsDenmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GreenlandDenmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Denmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DiamondPrincess ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Djibouti ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Dominica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DominicanRepublic ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ecuador ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Egypt ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ElSalvador ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " EquatorialGuinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Eritrea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Estonia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Eswatini ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ethiopia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Fiji ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Finland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FrenchGuianaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FrenchPolynesiaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuadeloupeFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MartiniqueFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MayotteFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewCaledoniaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ReunionFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintBarthelemyFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintPierreandMiquelonFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " StMartinFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WallisandFutunaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " France ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Gabon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Gambia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Georgia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Germany ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ghana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Greece ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Grenada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guatemala ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuineaBissau ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guyana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Haiti ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HolySee ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Honduras ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Hungary ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iceland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " India ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Indonesia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iran ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iraq ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ireland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Israel ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Italy ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Jamaica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Japan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Jordan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kazakhstan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kenya ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kiribati ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " KoreaSouth ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kosovo ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kuwait ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kyrgyzstan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Laos ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Latvia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lebanon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lesotho ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Liberia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Libya ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Liechtenstein ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lithuania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Luxembourg ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MSZaandam ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Madagascar ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malawi ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malaysia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Maldives ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mali ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malta ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MarshallIslands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mauritania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mauritius ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mexico ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Micronesia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Moldova ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Monaco ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mongolia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Montenegro ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Morocco ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mozambique ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Namibia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nepal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ArubaNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BonaireSintEustatiusandSabaNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CuracaoNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SintMaartenNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Netherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CookIslandsNewZealand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewZealand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nicaragua ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Niger ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nigeria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthMacedonia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Norway ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Oman ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Pakistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Palau ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Panama ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " PapuaNewGuinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Paraguay ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Peru ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Philippines ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Poland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Portugal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Qatar ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Romania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Russia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Rwanda ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintKittsandNevis ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintLucia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintVincentandtheGrenadines ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Samoa ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SanMarino ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaoTomeandPrincipe ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaudiArabia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Senegal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Serbia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Seychelles ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SierraLeone ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Singapore ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Slovakia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Slovenia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SolomonIslands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Somalia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthAfrica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthSudan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Spain ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SriLanka ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Sudan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SummerOlympics2020 ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Suriname ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Sweden ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Switzerland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Syria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Taiwan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tajikistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tanzania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Thailand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TimorLeste ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Togo ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tonga ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TrinidadandTobago ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tunisia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Turkey ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " US ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uganda ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ukraine ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnitedArabEmirates ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AnguillaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BermudaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BritishVirginIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CaymanIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ChannelIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FalklandIslandsMalvinasUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GibraltarUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " IsleofManUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MontserratUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TurksandCaicosIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uruguay ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uzbekistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Vanuatu ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Venezuela ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Vietnam ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WestBankandGaza ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Yemen ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Zambia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Zimbabwe ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Afghanistan ", " 1/22/20 ": 0, " 1/31/21 ": 55023}, {"combined": " Albania ", " 1/22/20 ": 0, " 1/31/21 ": 78127}, {"combined": " Algeria ", " 1/22/20 ": 0, " 1/31/21 ": 107339}, {"combined": " Andorra ", " 1/22/20 ": 0, " 1/31/21 ": 9937}, {"combined": " Angola ", " 1/22/20 ": 0, " 1/31/21 ": 19796}, {"combined": " AntiguaandBarbuda ", " 1/22/20 ": 0, " 1/31/21 ": 234}, {"combined": " Argentina ", " 1/22/20 ": 0, " 1/31/21 ": 1927239}, {"combined": " Armenia ", " 1/22/20 ": 0, " 1/31/21 ": 167026}, {"combined": " AustralianCapitalTerritoryAustralia ", " 1/22/20 ": 0, " 1/31/21 ": 118}]'
        self.assertEqual(correctText, response.text, "Should be "+ correctText)

    #test if data is posted correctly and can be viewed for one date and for the db deaths
    def test_post_one_date_deaths(self):
        files = {'file': open('./csvExamplesTS/one-date.csv', 'rb')}
        tester = app.test_client(self)
        response = requests.post(URL+'/addNewCSV?type=deaths', files=files)
        response = requests.get(URL+'/viewAll?type=deaths&file=json')
        files.get('file').close()
        correctText = '[{"combined": " NewSouthWalesAustralia ", " 1/22/20 ": null}, {"combined": " NorthernTerritoryAustralia ", " 1/22/20 ": null}, {"combined": " QueenslandAustralia ", " 1/22/20 ": null}, {"combined": " SouthAustraliaAustralia ", " 1/22/20 ": null}, {"combined": " TasmaniaAustralia ", " 1/22/20 ": null}, {"combined": " VictoriaAustralia ", " 1/22/20 ": null}, {"combined": " WesternAustraliaAustralia ", " 1/22/20 ": null}, {"combined": " Austria ", " 1/22/20 ": null}, {"combined": " Azerbaijan ", " 1/22/20 ": null}, {"combined": " Bahamas ", " 1/22/20 ": null}, {"combined": " Bahrain ", " 1/22/20 ": null}, {"combined": " Bangladesh ", " 1/22/20 ": null}, {"combined": " Barbados ", " 1/22/20 ": null}, {"combined": " Belarus ", " 1/22/20 ": null}, {"combined": " Belgium ", " 1/22/20 ": null}, {"combined": " Belize ", " 1/22/20 ": null}, {"combined": " Benin ", " 1/22/20 ": null}, {"combined": " Bhutan ", " 1/22/20 ": null}, {"combined": " Bolivia ", " 1/22/20 ": null}, {"combined": " BosniaandHerzegovina ", " 1/22/20 ": null}, {"combined": " Botswana ", " 1/22/20 ": null}, {"combined": " Brazil ", " 1/22/20 ": null}, {"combined": " Brunei ", " 1/22/20 ": null}, {"combined": " Bulgaria ", " 1/22/20 ": null}, {"combined": " BurkinaFaso ", " 1/22/20 ": null}, {"combined": " Burma ", " 1/22/20 ": null}, {"combined": " Burundi ", " 1/22/20 ": null}, {"combined": " CaboVerde ", " 1/22/20 ": null}, {"combined": " Cambodia ", " 1/22/20 ": null}, {"combined": " Cameroon ", " 1/22/20 ": null}, {"combined": " AlbertaCanada ", " 1/22/20 ": null}, {"combined": " BritishColumbiaCanada ", " 1/22/20 ": null}, {"combined": " DiamondPrincessCanada ", " 1/22/20 ": null}, {"combined": " GrandPrincessCanada ", " 1/22/20 ": null}, {"combined": " ManitobaCanada ", " 1/22/20 ": null}, {"combined": " NewBrunswickCanada ", " 1/22/20 ": null}, {"combined": " NewfoundlandandLabradorCanada ", " 1/22/20 ": null}, {"combined": " NorthwestTerritoriesCanada ", " 1/22/20 ": null}, {"combined": " NovaScotiaCanada ", " 1/22/20 ": null}, {"combined": " NunavutCanada ", " 1/22/20 ": null}, {"combined": " OntarioCanada ", " 1/22/20 ": null}, {"combined": " PrinceEdwardIslandCanada ", " 1/22/20 ": null}, {"combined": " QuebecCanada ", " 1/22/20 ": null}, {"combined": " RepatriatedTravellersCanada ", " 1/22/20 ": null}, {"combined": " SaskatchewanCanada ", " 1/22/20 ": null}, {"combined": " YukonCanada ", " 1/22/20 ": null}, {"combined": " CentralAfricanRepublic ", " 1/22/20 ": null}, {"combined": " Chad ", " 1/22/20 ": null}, {"combined": " Chile ", " 1/22/20 ": null}, {"combined": " AnhuiChina ", " 1/22/20 ": null}, {"combined": " BeijingChina ", " 1/22/20 ": null}, {"combined": " ChongqingChina ", " 1/22/20 ": null}, {"combined": " FujianChina ", " 1/22/20 ": null}, {"combined": " GansuChina ", " 1/22/20 ": null}, {"combined": " GuangdongChina ", " 1/22/20 ": null}, {"combined": " GuangxiChina ", " 1/22/20 ": null}, {"combined": " GuizhouChina ", " 1/22/20 ": null}, {"combined": " HainanChina ", " 1/22/20 ": null}, {"combined": " HebeiChina ", " 1/22/20 ": null}, {"combined": " HeilongjiangChina ", " 1/22/20 ": null}, {"combined": " HenanChina ", " 1/22/20 ": null}, {"combined": " HongKongChina ", " 1/22/20 ": null}, {"combined": " HubeiChina ", " 1/22/20 ": null}, {"combined": " HunanChina ", " 1/22/20 ": null}, {"combined": " InnerMongoliaChina ", " 1/22/20 ": null}, {"combined": " JiangsuChina ", " 1/22/20 ": null}, {"combined": " JiangxiChina ", " 1/22/20 ": null}, {"combined": " JilinChina ", " 1/22/20 ": null}, {"combined": " LiaoningChina ", " 1/22/20 ": null}, {"combined": " MacauChina ", " 1/22/20 ": null}, {"combined": " NingxiaChina ", " 1/22/20 ": null}, {"combined": " QinghaiChina ", " 1/22/20 ": null}, {"combined": " ShaanxiChina ", " 1/22/20 ": null}, {"combined": " ShandongChina ", " 1/22/20 ": null}, {"combined": " ShanghaiChina ", " 1/22/20 ": null}, {"combined": " ShanxiChina ", " 1/22/20 ": null}, {"combined": " SichuanChina ", " 1/22/20 ": null}, {"combined": " TianjinChina ", " 1/22/20 ": null}, {"combined": " TibetChina ", " 1/22/20 ": null}, {"combined": " UnknownChina ", " 1/22/20 ": null}, {"combined": " XinjiangChina ", " 1/22/20 ": null}, {"combined": " YunnanChina ", " 1/22/20 ": null}, {"combined": " ZhejiangChina ", " 1/22/20 ": null}, {"combined": " Colombia ", " 1/22/20 ": null}, {"combined": " Comoros ", " 1/22/20 ": null}, {"combined": " CongoBrazzaville ", " 1/22/20 ": null}, {"combined": " CongoKinshasa ", " 1/22/20 ": null}, {"combined": " CostaRica ", " 1/22/20 ": null}, {"combined": " CotedIvoire ", " 1/22/20 ": null}, {"combined": " Croatia ", " 1/22/20 ": null}, {"combined": " Cuba ", " 1/22/20 ": null}, {"combined": " Cyprus ", " 1/22/20 ": null}, {"combined": " Czechia ", " 1/22/20 ": null}, {"combined": " FaroeIslandsDenmark ", " 1/22/20 ": null}, {"combined": " GreenlandDenmark ", " 1/22/20 ": null}, {"combined": " Denmark ", " 1/22/20 ": null}, {"combined": " DiamondPrincess ", " 1/22/20 ": null}, {"combined": " Djibouti ", " 1/22/20 ": null}, {"combined": " Dominica ", " 1/22/20 ": null}, {"combined": " DominicanRepublic ", " 1/22/20 ": null}, {"combined": " Ecuador ", " 1/22/20 ": null}, {"combined": " Egypt ", " 1/22/20 ": null}, {"combined": " ElSalvador ", " 1/22/20 ": null}, {"combined": " EquatorialGuinea ", " 1/22/20 ": null}, {"combined": " Eritrea ", " 1/22/20 ": null}, {"combined": " Estonia ", " 1/22/20 ": null}, {"combined": " Eswatini ", " 1/22/20 ": null}, {"combined": " Ethiopia ", " 1/22/20 ": null}, {"combined": " Fiji ", " 1/22/20 ": null}, {"combined": " Finland ", " 1/22/20 ": null}, {"combined": " FrenchGuianaFrance ", " 1/22/20 ": null}, {"combined": " FrenchPolynesiaFrance ", " 1/22/20 ": null}, {"combined": " GuadeloupeFrance ", " 1/22/20 ": null}, {"combined": " MartiniqueFrance ", " 1/22/20 ": null}, {"combined": " MayotteFrance ", " 1/22/20 ": null}, {"combined": " NewCaledoniaFrance ", " 1/22/20 ": null}, {"combined": " ReunionFrance ", " 1/22/20 ": null}, {"combined": " SaintBarthelemyFrance ", " 1/22/20 ": null}, {"combined": " SaintPierreandMiquelonFrance ", " 1/22/20 ": null}, {"combined": " StMartinFrance ", " 1/22/20 ": null}, {"combined": " WallisandFutunaFrance ", " 1/22/20 ": null}, {"combined": " France ", " 1/22/20 ": null}, {"combined": " Gabon ", " 1/22/20 ": null}, {"combined": " Gambia ", " 1/22/20 ": null}, {"combined": " Georgia ", " 1/22/20 ": null}, {"combined": " Germany ", " 1/22/20 ": null}, {"combined": " Ghana ", " 1/22/20 ": null}, {"combined": " Greece ", " 1/22/20 ": null}, {"combined": " Grenada ", " 1/22/20 ": null}, {"combined": " Guatemala ", " 1/22/20 ": null}, {"combined": " Guinea ", " 1/22/20 ": null}, {"combined": " GuineaBissau ", " 1/22/20 ": null}, {"combined": " Guyana ", " 1/22/20 ": null}, {"combined": " Haiti ", " 1/22/20 ": null}, {"combined": " HolySee ", " 1/22/20 ": null}, {"combined": " Honduras ", " 1/22/20 ": null}, {"combined": " Hungary ", " 1/22/20 ": null}, {"combined": " Iceland ", " 1/22/20 ": null}, {"combined": " India ", " 1/22/20 ": null}, {"combined": " Indonesia ", " 1/22/20 ": null}, {"combined": " Iran ", " 1/22/20 ": null}, {"combined": " Iraq ", " 1/22/20 ": null}, {"combined": " Ireland ", " 1/22/20 ": null}, {"combined": " Israel ", " 1/22/20 ": null}, {"combined": " Italy ", " 1/22/20 ": null}, {"combined": " Jamaica ", " 1/22/20 ": null}, {"combined": " Japan ", " 1/22/20 ": null}, {"combined": " Jordan ", " 1/22/20 ": null}, {"combined": " Kazakhstan ", " 1/22/20 ": null}, {"combined": " Kenya ", " 1/22/20 ": null}, {"combined": " Kiribati ", " 1/22/20 ": null}, {"combined": " KoreaSouth ", " 1/22/20 ": null}, {"combined": " Kosovo ", " 1/22/20 ": null}, {"combined": " Kuwait ", " 1/22/20 ": null}, {"combined": " Kyrgyzstan ", " 1/22/20 ": null}, {"combined": " Laos ", " 1/22/20 ": null}, {"combined": " Latvia ", " 1/22/20 ": null}, {"combined": " Lebanon ", " 1/22/20 ": null}, {"combined": " Lesotho ", " 1/22/20 ": null}, {"combined": " Liberia ", " 1/22/20 ": null}, {"combined": " Libya ", " 1/22/20 ": null}, {"combined": " Liechtenstein ", " 1/22/20 ": null}, {"combined": " Lithuania ", " 1/22/20 ": null}, {"combined": " Luxembourg ", " 1/22/20 ": null}, {"combined": " MSZaandam ", " 1/22/20 ": null}, {"combined": " Madagascar ", " 1/22/20 ": null}, {"combined": " Malawi ", " 1/22/20 ": null}, {"combined": " Malaysia ", " 1/22/20 ": null}, {"combined": " Maldives ", " 1/22/20 ": null}, {"combined": " Mali ", " 1/22/20 ": null}, {"combined": " Malta ", " 1/22/20 ": null}, {"combined": " MarshallIslands ", " 1/22/20 ": null}, {"combined": " Mauritania ", " 1/22/20 ": null}, {"combined": " Mauritius ", " 1/22/20 ": null}, {"combined": " Mexico ", " 1/22/20 ": null}, {"combined": " Micronesia ", " 1/22/20 ": null}, {"combined": " Moldova ", " 1/22/20 ": null}, {"combined": " Monaco ", " 1/22/20 ": null}, {"combined": " Mongolia ", " 1/22/20 ": null}, {"combined": " Montenegro ", " 1/22/20 ": null}, {"combined": " Morocco ", " 1/22/20 ": null}, {"combined": " Mozambique ", " 1/22/20 ": null}, {"combined": " Namibia ", " 1/22/20 ": null}, {"combined": " Nepal ", " 1/22/20 ": null}, {"combined": " ArubaNetherlands ", " 1/22/20 ": null}, {"combined": " BonaireSintEustatiusandSabaNetherlands ", " 1/22/20 ": null}, {"combined": " CuracaoNetherlands ", " 1/22/20 ": null}, {"combined": " SintMaartenNetherlands ", " 1/22/20 ": null}, {"combined": " Netherlands ", " 1/22/20 ": null}, {"combined": " CookIslandsNewZealand ", " 1/22/20 ": null}, {"combined": " NewZealand ", " 1/22/20 ": null}, {"combined": " Nicaragua ", " 1/22/20 ": null}, {"combined": " Niger ", " 1/22/20 ": null}, {"combined": " Nigeria ", " 1/22/20 ": null}, {"combined": " NorthMacedonia ", " 1/22/20 ": null}, {"combined": " Norway ", " 1/22/20 ": null}, {"combined": " Oman ", " 1/22/20 ": null}, {"combined": " Pakistan ", " 1/22/20 ": null}, {"combined": " Palau ", " 1/22/20 ": null}, {"combined": " Panama ", " 1/22/20 ": null}, {"combined": " PapuaNewGuinea ", " 1/22/20 ": null}, {"combined": " Paraguay ", " 1/22/20 ": null}, {"combined": " Peru ", " 1/22/20 ": null}, {"combined": " Philippines ", " 1/22/20 ": null}, {"combined": " Poland ", " 1/22/20 ": null}, {"combined": " Portugal ", " 1/22/20 ": null}, {"combined": " Qatar ", " 1/22/20 ": null}, {"combined": " Romania ", " 1/22/20 ": null}, {"combined": " Russia ", " 1/22/20 ": null}, {"combined": " Rwanda ", " 1/22/20 ": null}, {"combined": " SaintKittsandNevis ", " 1/22/20 ": null}, {"combined": " SaintLucia ", " 1/22/20 ": null}, {"combined": " SaintVincentandtheGrenadines ", " 1/22/20 ": null}, {"combined": " Samoa ", " 1/22/20 ": null}, {"combined": " SanMarino ", " 1/22/20 ": null}, {"combined": " SaoTomeandPrincipe ", " 1/22/20 ": null}, {"combined": " SaudiArabia ", " 1/22/20 ": null}, {"combined": " Senegal ", " 1/22/20 ": null}, {"combined": " Serbia ", " 1/22/20 ": null}, {"combined": " Seychelles ", " 1/22/20 ": null}, {"combined": " SierraLeone ", " 1/22/20 ": null}, {"combined": " Singapore ", " 1/22/20 ": null}, {"combined": " Slovakia ", " 1/22/20 ": null}, {"combined": " Slovenia ", " 1/22/20 ": null}, {"combined": " SolomonIslands ", " 1/22/20 ": null}, {"combined": " Somalia ", " 1/22/20 ": null}, {"combined": " SouthAfrica ", " 1/22/20 ": null}, {"combined": " SouthSudan ", " 1/22/20 ": null}, {"combined": " Spain ", " 1/22/20 ": null}, {"combined": " SriLanka ", " 1/22/20 ": null}, {"combined": " Sudan ", " 1/22/20 ": null}, {"combined": " SummerOlympics2020 ", " 1/22/20 ": null}, {"combined": " Suriname ", " 1/22/20 ": null}, {"combined": " Sweden ", " 1/22/20 ": null}, {"combined": " Switzerland ", " 1/22/20 ": null}, {"combined": " Syria ", " 1/22/20 ": null}, {"combined": " Taiwan ", " 1/22/20 ": null}, {"combined": " Tajikistan ", " 1/22/20 ": null}, {"combined": " Tanzania ", " 1/22/20 ": null}, {"combined": " Thailand ", " 1/22/20 ": null}, {"combined": " TimorLeste ", " 1/22/20 ": null}, {"combined": " Togo ", " 1/22/20 ": null}, {"combined": " Tonga ", " 1/22/20 ": null}, {"combined": " TrinidadandTobago ", " 1/22/20 ": null}, {"combined": " Tunisia ", " 1/22/20 ": null}, {"combined": " Turkey ", " 1/22/20 ": null}, {"combined": " US ", " 1/22/20 ": null}, {"combined": " Uganda ", " 1/22/20 ": null}, {"combined": " Ukraine ", " 1/22/20 ": null}, {"combined": " UnitedArabEmirates ", " 1/22/20 ": null}, {"combined": " AnguillaUnitedKingdom ", " 1/22/20 ": null}, {"combined": " BermudaUnitedKingdom ", " 1/22/20 ": null}, {"combined": " BritishVirginIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " CaymanIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " ChannelIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " FalklandIslandsMalvinasUnitedKingdom ", " 1/22/20 ": null}, {"combined": " GibraltarUnitedKingdom ", " 1/22/20 ": null}, {"combined": " IsleofManUnitedKingdom ", " 1/22/20 ": null}, {"combined": " MontserratUnitedKingdom ", " 1/22/20 ": null}, {"combined": " SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", " 1/22/20 ": null}, {"combined": " TurksandCaicosIslandsUnitedKingdom ", " 1/22/20 ": null}, {"combined": " UnitedKingdom ", " 1/22/20 ": null}, {"combined": " Uruguay ", " 1/22/20 ": null}, {"combined": " Uzbekistan ", " 1/22/20 ": null}, {"combined": " Vanuatu ", " 1/22/20 ": null}, {"combined": " Venezuela ", " 1/22/20 ": null}, {"combined": " Vietnam ", " 1/22/20 ": null}, {"combined": " WestBankandGaza ", " 1/22/20 ": null}, {"combined": " Yemen ", " 1/22/20 ": null}, {"combined": " Zambia ", " 1/22/20 ": null}, {"combined": " Zimbabwe ", " 1/22/20 ": null}, {"combined": " Afghanistan ", " 1/22/20 ": 0}, {"combined": " Albania ", " 1/22/20 ": 0}, {"combined": " Algeria ", " 1/22/20 ": 0}, {"combined": " Andorra ", " 1/22/20 ": 0}, {"combined": " Angola ", " 1/22/20 ": 0}, {"combined": " AntiguaandBarbuda ", " 1/22/20 ": 0}, {"combined": " Argentina ", " 1/22/20 ": 0}, {"combined": " Armenia ", " 1/22/20 ": 0}, {"combined": " AustralianCapitalTerritoryAustralia ", " 1/22/20 ": 0}]'
        self.assertEqual(correctText, response.text, "Should be "+ correctText)

    #test if data is posted correctly and can be viewed for many dates and for the db deaths
    def test_post_multiple_dates_deaths(self):
        files = {'file': open('./csvExamplesTS/two-date.csv', 'rb')}
        tester = app.test_client(self)
        response = requests.post(URL+'/addNewCSV?type=deaths', files=files)
        response = requests.get(URL+'/viewAll?type=deaths&file=json')
        files.get('file').close()
        correctText = '[{"combined": " NewSouthWalesAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthernTerritoryAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QueenslandAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthAustraliaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TasmaniaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " VictoriaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WesternAustraliaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Austria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Azerbaijan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bahamas ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bahrain ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bangladesh ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Barbados ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belarus ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belgium ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belize ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Benin ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bhutan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bolivia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BosniaandHerzegovina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Botswana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Brazil ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Brunei ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bulgaria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BurkinaFaso ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Burma ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Burundi ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CaboVerde ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cambodia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cameroon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AlbertaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BritishColumbiaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DiamondPrincessCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GrandPrincessCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ManitobaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewBrunswickCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewfoundlandandLabradorCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthwestTerritoriesCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NovaScotiaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NunavutCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " OntarioCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " PrinceEdwardIslandCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QuebecCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " RepatriatedTravellersCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaskatchewanCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " YukonCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CentralAfricanRepublic ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Chad ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Chile ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AnhuiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BeijingChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ChongqingChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FujianChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GansuChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuangdongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuangxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuizhouChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HainanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HebeiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HeilongjiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HenanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HongKongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HubeiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HunanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " InnerMongoliaChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JiangsuChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JiangxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JilinChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " LiaoningChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MacauChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NingxiaChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QinghaiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShaanxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShandongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShanghaiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShanxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SichuanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TianjinChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TibetChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnknownChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " XinjiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " YunnanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ZhejiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Colombia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Comoros ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CongoBrazzaville ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CongoKinshasa ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CostaRica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CotedIvoire ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Croatia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cuba ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cyprus ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Czechia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FaroeIslandsDenmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GreenlandDenmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Denmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DiamondPrincess ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Djibouti ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Dominica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DominicanRepublic ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ecuador ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Egypt ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ElSalvador ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " EquatorialGuinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Eritrea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Estonia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Eswatini ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ethiopia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Fiji ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Finland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FrenchGuianaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FrenchPolynesiaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuadeloupeFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MartiniqueFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MayotteFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewCaledoniaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ReunionFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintBarthelemyFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintPierreandMiquelonFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " StMartinFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WallisandFutunaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " France ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Gabon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Gambia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Georgia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Germany ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ghana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Greece ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Grenada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guatemala ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuineaBissau ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guyana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Haiti ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HolySee ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Honduras ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Hungary ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iceland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " India ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Indonesia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iran ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iraq ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ireland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Israel ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Italy ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Jamaica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Japan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Jordan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kazakhstan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kenya ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kiribati ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " KoreaSouth ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kosovo ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kuwait ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kyrgyzstan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Laos ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Latvia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lebanon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lesotho ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Liberia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Libya ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Liechtenstein ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lithuania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Luxembourg ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MSZaandam ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Madagascar ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malawi ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malaysia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Maldives ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mali ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malta ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MarshallIslands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mauritania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mauritius ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mexico ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Micronesia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Moldova ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Monaco ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mongolia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Montenegro ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Morocco ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mozambique ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Namibia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nepal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ArubaNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BonaireSintEustatiusandSabaNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CuracaoNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SintMaartenNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Netherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CookIslandsNewZealand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewZealand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nicaragua ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Niger ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nigeria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthMacedonia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Norway ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Oman ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Pakistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Palau ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Panama ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " PapuaNewGuinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Paraguay ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Peru ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Philippines ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Poland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Portugal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Qatar ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Romania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Russia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Rwanda ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintKittsandNevis ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintLucia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintVincentandtheGrenadines ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Samoa ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SanMarino ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaoTomeandPrincipe ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaudiArabia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Senegal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Serbia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Seychelles ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SierraLeone ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Singapore ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Slovakia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Slovenia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SolomonIslands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Somalia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthAfrica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthSudan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Spain ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SriLanka ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Sudan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SummerOlympics2020 ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Suriname ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Sweden ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Switzerland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Syria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Taiwan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tajikistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tanzania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Thailand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TimorLeste ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Togo ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tonga ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TrinidadandTobago ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tunisia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Turkey ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " US ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uganda ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ukraine ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnitedArabEmirates ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AnguillaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BermudaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BritishVirginIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CaymanIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ChannelIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FalklandIslandsMalvinasUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GibraltarUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " IsleofManUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MontserratUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TurksandCaicosIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uruguay ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uzbekistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Vanuatu ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Venezuela ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Vietnam ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WestBankandGaza ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Yemen ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Zambia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Zimbabwe ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Afghanistan ", " 1/22/20 ": 0, " 1/31/21 ": 55023}, {"combined": " Albania ", " 1/22/20 ": 0, " 1/31/21 ": 78127}, {"combined": " Algeria ", " 1/22/20 ": 0, " 1/31/21 ": 107339}, {"combined": " Andorra ", " 1/22/20 ": 0, " 1/31/21 ": 9937}, {"combined": " Angola ", " 1/22/20 ": 0, " 1/31/21 ": 19796}, {"combined": " AntiguaandBarbuda ", " 1/22/20 ": 0, " 1/31/21 ": 234}, {"combined": " Argentina ", " 1/22/20 ": 0, " 1/31/21 ": 1927239}, {"combined": " Armenia ", " 1/22/20 ": 0, " 1/31/21 ": 167026}, {"combined": " AustralianCapitalTerritoryAustralia ", " 1/22/20 ": 0, " 1/31/21 ": 118}]'
        self.assertEqual(correctText, response.text, "Should be "+ correctText)
    

    # update existing database for the db confirmed
    def test_update(self):
        tester = app.test_client(self)
        response = tester.get("/deleteAll")

        #add data
        files = {'file': open('./csvExamplesTS/one-date.csv', 'rb')}
        response = requests.post(URL+'/addNewCSV?type=confirmed', files=files)
        files.get('file').close()

        #update with extra data
        files = {'file': open('./csvExamplesTS/one-date-diff.csv', 'rb')}
        response = requests.post(URL+'/updateCSV?type=confirmed', files=files)
        files.get('file').close()


        response = requests.get(URL+'/viewAll?type=confirmed&file=json')

        #find if update was successful
        correctText = '[{"combined": " NewSouthWalesAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthernTerritoryAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QueenslandAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthAustraliaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TasmaniaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " VictoriaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WesternAustraliaAustralia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Austria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Azerbaijan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bahamas ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bahrain ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bangladesh ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Barbados ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belarus ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belgium ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Belize ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Benin ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bhutan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bolivia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BosniaandHerzegovina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Botswana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Brazil ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Brunei ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Bulgaria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BurkinaFaso ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Burma ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Burundi ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CaboVerde ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cambodia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cameroon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AlbertaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BritishColumbiaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DiamondPrincessCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GrandPrincessCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ManitobaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewBrunswickCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewfoundlandandLabradorCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthwestTerritoriesCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NovaScotiaCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NunavutCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " OntarioCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " PrinceEdwardIslandCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QuebecCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " RepatriatedTravellersCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaskatchewanCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " YukonCanada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CentralAfricanRepublic ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Chad ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Chile ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AnhuiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BeijingChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ChongqingChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FujianChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GansuChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuangdongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuangxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuizhouChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HainanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HebeiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HeilongjiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HenanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HongKongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HubeiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HunanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " InnerMongoliaChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JiangsuChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JiangxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " JilinChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " LiaoningChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MacauChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NingxiaChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " QinghaiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShaanxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShandongChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShanghaiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ShanxiChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SichuanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TianjinChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TibetChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnknownChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " XinjiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " YunnanChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ZhejiangChina ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Colombia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Comoros ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CongoBrazzaville ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CongoKinshasa ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CostaRica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CotedIvoire ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Croatia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cuba ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Cyprus ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Czechia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FaroeIslandsDenmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GreenlandDenmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Denmark ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DiamondPrincess ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Djibouti ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Dominica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " DominicanRepublic ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ecuador ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Egypt ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ElSalvador ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " EquatorialGuinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Eritrea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Estonia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Eswatini ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ethiopia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Fiji ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Finland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FrenchGuianaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FrenchPolynesiaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuadeloupeFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MartiniqueFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MayotteFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewCaledoniaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ReunionFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintBarthelemyFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintPierreandMiquelonFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " StMartinFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WallisandFutunaFrance ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " France ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Gabon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Gambia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Georgia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Germany ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ghana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Greece ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Grenada ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guatemala ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GuineaBissau ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Guyana ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Haiti ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " HolySee ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Honduras ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Hungary ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iceland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " India ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Indonesia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iran ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Iraq ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ireland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Israel ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Italy ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Jamaica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Japan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Jordan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kazakhstan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kenya ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kiribati ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " KoreaSouth ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kosovo ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kuwait ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Kyrgyzstan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Laos ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Latvia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lebanon ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lesotho ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Liberia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Libya ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Liechtenstein ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Lithuania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Luxembourg ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MSZaandam ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Madagascar ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malawi ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malaysia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Maldives ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mali ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Malta ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MarshallIslands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mauritania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mauritius ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mexico ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Micronesia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Moldova ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Monaco ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mongolia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Montenegro ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Morocco ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Mozambique ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Namibia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nepal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ArubaNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BonaireSintEustatiusandSabaNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CuracaoNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SintMaartenNetherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Netherlands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CookIslandsNewZealand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NewZealand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nicaragua ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Niger ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Nigeria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " NorthMacedonia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Norway ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Oman ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Pakistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Palau ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Panama ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " PapuaNewGuinea ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Paraguay ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Peru ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Philippines ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Poland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Portugal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Qatar ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Romania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Russia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Rwanda ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintKittsandNevis ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintLucia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintVincentandtheGrenadines ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Samoa ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SanMarino ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaoTomeandPrincipe ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaudiArabia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Senegal ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Serbia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Seychelles ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SierraLeone ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Singapore ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Slovakia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Slovenia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SolomonIslands ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Somalia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthAfrica ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SouthSudan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Spain ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SriLanka ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Sudan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SummerOlympics2020 ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Suriname ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Sweden ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Switzerland ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Syria ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Taiwan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tajikistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tanzania ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Thailand ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TimorLeste ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Togo ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tonga ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TrinidadandTobago ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Tunisia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Turkey ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " US ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uganda ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Ukraine ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnitedArabEmirates ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " AnguillaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BermudaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " BritishVirginIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " CaymanIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " ChannelIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " FalklandIslandsMalvinasUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " GibraltarUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " IsleofManUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " MontserratUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " TurksandCaicosIslandsUnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " UnitedKingdom ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uruguay ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Uzbekistan ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Vanuatu ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Venezuela ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Vietnam ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " WestBankandGaza ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Yemen ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Zambia ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Zimbabwe ", " 1/22/20 ": null, " 1/31/21 ": null}, {"combined": " Afghanistan ", " 1/22/20 ": 0, " 1/31/21 ": 55023}, {"combined": " Albania ", " 1/22/20 ": 0, " 1/31/21 ": 78127}, {"combined": " Algeria ", " 1/22/20 ": 0, " 1/31/21 ": 107339}, {"combined": " Andorra ", " 1/22/20 ": 0, " 1/31/21 ": 9937}, {"combined": " Angola ", " 1/22/20 ": 0, " 1/31/21 ": 19796}, {"combined": " AntiguaandBarbuda ", " 1/22/20 ": 0, " 1/31/21 ": 234}, {"combined": " Argentina ", " 1/22/20 ": 0, " 1/31/21 ": 1927239}, {"combined": " Armenia ", " 1/22/20 ": 0, " 1/31/21 ": 167026}, {"combined": " AustralianCapitalTerritoryAustralia ", " 1/22/20 ": 0, " 1/31/21 ": 118}]'
        self.assertEqual(correctText, response.text, "Should be "+ correctText)

    #query with only type for db confirmed
    def test_queries_only_type(self):
        # Ensure files are set up, if not already
        global q_setup
        if q_setup == False:
            setup_queries(self)
            q_setup = True

        response = requests.get(URL + '/info?type=confirmed')
        correctText = """[[" Afghanistan ", 0, 55023], [" Albania ", 0, 78127], [" Algeria ", 0, 107339], [" Andorra ", 0, 9937], [" Angola ", 0, 19796], [" AntiguaandBarbuda ", 0, 234], [" Argentina ", 0, 1927239], [" Armenia ", 0, 167026], [" AustralianCapitalTerritoryAustralia ", 0, 118], [" NewSouthWalesAustralia ", 0, 5110], [" NorthernTerritoryAustralia ", 0, 98], [" QueenslandAustralia ", 0, 1310], [" SouthAustraliaAustralia ", 0, 596], [" TasmaniaAustralia ", 0, 234], [" VictoriaAustralia ", 0, 20449], [" WesternAustraliaAustralia ", 0, 903], [" Austria ", 0, 414398], [" Azerbaijan ", 0, 230219], [" Bahamas ", 0, 8174], [" Bahrain ", 0, 103057], [" Bangladesh ", 0, 535139], [" Barbados ", 0, 1545], [" Belarus ", 0, 248336], [" Belgium ", 0, 710153], [" Belize ", 0, 11908], [" Benin ", 0, 3893], [" Bhutan ", 0, 859], [" Bolivia ", 0, 216835], [" BosniaandHerzegovina ", 0, 121497], [" Botswana ", 0, 21293], [" Brazil ", 0, 9204731], [" Brunei ", 0, 180], [" Bulgaria ", 0, 218748], [" BurkinaFaso ", 0, 10682], [" Burma ", 0, 140145], [" Burundi ", 0, 1632], [" CaboVerde ", 0, 14070], [" Cambodia ", 0, 466], [" Cameroon ", 0, 29617], [" AlbertaCanada ", 0, 124208], [" BritishColumbiaCanada ", 0, 66779], [" DiamondPrincessCanada ", 0, 0], [" GrandPrincessCanada ", 0, 13], [" ManitobaCanada ", 0, 29564], [" NewBrunswickCanada ", 0, 1256], [" NewfoundlandandLabradorCanada ", 0, 408], [" NorthwestTerritoriesCanada ", 0, 35], [" NovaScotiaCanada ", 0, 1580], [" NunavutCanada ", 0, 294], [" OntarioCanada ", 0, 272917], [" PrinceEdwardIslandCanada ", 0, 111], [" QuebecCanada ", 0, 262623], [" RepatriatedTravellersCanada ", 0, 13], [" SaskatchewanCanada ", 0, 23864], [" YukonCanada ", 0, 70], [" CentralAfricanRepublic ", 0, 4981], [" Chad ", 0, 3376], [" Chile ", 0, 727109], [" AnhuiChina ", 1, 994], [" BeijingChina ", 14, 1038], [" ChongqingChina ", 6, 591], [" FujianChina ", 1, 541], [" GansuChina ", 0, 187], [" GuangdongChina ", 26, 2125], [" GuangxiChina ", 2, 267], [" GuizhouChina ", 1, 147], [" HainanChina ", 4, 171], [" HebeiChina ", 1, 1313], [" HeilongjiangChina ", 0, 1583], [" HenanChina ", 5, 1303], [" HongKongChina ", 0, 10452], [" HubeiChina ", 444, 68150], [" HunanChina ", 4, 1032], [" InnerMongoliaChina ", 0, 366], [" JiangsuChina ", 1, 694], [" JiangxiChina ", 2, 935], [" JilinChina ", 0, 551], [" LiaoningChina ", 2, 400], [" MacauChina ", 1, 47], [" NingxiaChina ", 1, 75], [" QinghaiChina ", 0, 18], [" ShaanxiChina ", 0, 539], [" ShandongChina ", 2, 866], [" ShanghaiChina ", 9, 1698], [" ShanxiChina ", 1, 238], [" SichuanChina ", 5, 870], [" TianjinChina ", 4, 344], [" TibetChina ", 0, 1], [" UnknownChina ", 0, 0], [" XinjiangChina ", 0, 980], [" YunnanChina ", 1, 231], [" ZhejiangChina ", 10, 1316], [" Colombia ", 0, 2094884], [" Comoros ", 0, 2726], [" CongoBrazzaville ", 0, 7887], [" CongoKinshasa ", 0, 22771], [" CostaRica ", 0, 193276], [" CotedIvoire ", 0, 28399], [" Croatia ", 0, 232426], [" Cuba ", 0, 26686], [" Cyprus ", 0, 31227], [" Czechia ", 0, 984774], [" FaroeIslandsDenmark ", 0, 654], [" GreenlandDenmark ", 0, 30], [" Denmark ", 0, 198472], [" DiamondPrincess ", 0, 712], [" Djibouti ", 0, 5932], [" Dominica ", 0, 117], [" DominicanRepublic ", 0, 214060], [" Ecuador ", 0, 250828], [" Egypt ", 0, 165951], [" ElSalvador ", 0, 54966], [" EquatorialGuinea ", 0, 5516], [" Eritrea ", 0, 2135], [" Estonia ", 0, 44208], [" Eswatini ", 0, 15711], [" Ethiopia ", 0, 137650], [" Fiji ", 0, 55], [" Finland ", 0, 45238], [" FrenchGuianaFrance ", 0, 16083], [" FrenchPolynesiaFrance ", 0, 18060], [" GuadeloupeFrance ", 0, 9156], [" MartiniqueFrance ", 0, 6370], [" MayotteFrance ", 0, 8231], [" NewCaledoniaFrance ", 0, 47], [" ReunionFrance ", 0, 9996], [" SaintBarthelemyFrance ", 0, 379], [" SaintPierreandMiquelonFrance ", 0, 24], [" StMartinFrance ", 0, 1289], [" WallisandFutunaFrance ", 0, 5], [" France ", 0, 3186354], [" Gabon ", 0, 10748], [" Gambia ", 0, 4090], [" Georgia ", 0, 258111], [" Germany ", 0, 2225659], [" Ghana ", 0, 67010], [" Greece ", 0, 156957], [" Grenada ", 0, 148], [" Guatemala ", 0, 159504], [" Guinea ", 0, 14546], [" GuineaBissau ", 0, 2634], [" Guyana ", 0, 7641], [" Haiti ", 0, 11533], [" HolySee ", 0, 27], [" Honduras ", 0, 147843], [" Hungary ", 0, 367586], [" Iceland ", 0, 6002], [" India ", 0, 10757610], [" Indonesia ", 0, 1078314], [" Iran ", 0, 1417999], [" Iraq ", 0, 619636], [" Ireland ", 0, 196547], [" Israel ", 0, 643435], [" Italy ", 0, 2553032], [" Jamaica ", 0, 15653], [" Japan ", 2, 390740], [" Jordan ", 0, 326855], [" Kazakhstan ", 0, 235844], [" Kenya ", 0, 100773], [" Kiribati ", 0, 0], [" KoreaSouth ", 1, 78508], [" Kosovo ", 0, 60218], [" Kuwait ", 0, 165257], [" Kyrgyzstan ", 0, 84588], [" Laos ", 0, 44], [" Latvia ", 0, 66241], [" Lebanon ", 0, 301052], [" Lesotho ", 0, 8664], [" Liberia ", 0, 1939], [" Libya ", 0, 118631], [" Liechtenstein ", 0, 2565], [" Lithuania ", 0, 182543], [" Luxembourg ", 0, 50388], [" MSZaandam ", 0, 9], [" Madagascar ", 0, 19065], [" Malawi ", 0, 23963], [" Malaysia ", 0, 214959], [" Maldives ", 0, 15841], [" Mali ", 0, 8091], [" Malta ", 0, 17903], [" MarshallIslands ", 0, 4], [" Mauritania ", 0, 16635], [" Mauritius ", 0, 569], [" Mexico ", 0, 1864260], [" Micronesia ", 0, 1], [" Moldova ", 0, 159804], [" Monaco ", 0, 1489], [" Mongolia ", 0, 1814], [" Montenegro ", 0, 61659], [" Morocco ", 0, 471157], [" Mozambique ", 0, 38654], [" Namibia ", 0, 33944], [" Nepal ", 0, 270959], [" ArubaNetherlands ", 0, 6966], [" BonaireSintEustatiusandSabaNetherlands ", 0, 196], [" CuracaoNetherlands ", 0, 4585], [" SintMaartenNetherlands ", 0, 1853], [" Netherlands ", 0, 978475], [" CookIslandsNewZealand ", 0, 0], [" NewZealand ", 0, 2304], [" Nicaragua ", 0, 6253], [" Niger ", 0, 4517], [" Nigeria ", 0, 131242], [" NorthMacedonia ", 0, 92693], [" Norway ", 0, 62966], [" Oman ", 0, 134326], [" Pakistan ", 0, 546428], [" Palau ", 0, 0], [" Panama ", 0, 320379], [" PapuaNewGuinea ", 0, 851], [" Paraguay ", 0, 133227], [" Peru ", 0, 1138239], [" Philippines ", 0, 525618], [" Poland ", 0, 1513385], [" Portugal ", 0, 720516], [" Qatar ", 0, 151335], [" Romania ", 0, 728743], [" Russia ", 0, 3808348], [" Rwanda ", 0, 15304], [" SaintKittsandNevis ", 0, 37], [" SaintLucia ", 0, 1195], [" SaintVincentandtheGrenadines ", 0, 901], [" Samoa ", 0, 2], [" SanMarino ", 0, 3025], [" SaoTomeandPrincipe ", 0, 1257], [" SaudiArabia ", 0, 368074], [" Senegal ", 0, 26523], [" Serbia ", 0, 395263], [" Seychelles ", 0, 1186], [" SierraLeone ", 0, 3593], [" Singapore ", 0, 59536], [" Slovakia ", 0, 249913], [" Slovenia ", 0, 166473], [" SolomonIslands ", 0, 17], [" Somalia ", 0, 4784], [" SouthAfrica ", 0, 1453761], [" SouthSudan ", 0, 3929], [" Spain ", 0, 2743119], [" SriLanka ", 0, 64157], [" Sudan ", 0, 29380], [" SummerOlympics2020 ", 0, 0], [" Suriname ", 0, 8438], [" Sweden ", 0, 566957], [" Switzerland ", 0, 521320], [" Syria ", 0, 14048], [" Taiwan ", 1, 911], [" Tajikistan ", 0, 13714], [" Tanzania ", 0, 509], [" Thailand ", 4, 19618], [" TimorLeste ", 0, 70], [" Togo ", 0, 5074], [" Tonga ", 0, 0], [" TrinidadandTobago ", 0, 7564], [" Tunisia ", 0, 208885], [" Turkey ", 0, 2477463], [" US ", 1, 26312724], [" Uganda ", 0, 39579], [" Ukraine ", 0, 1261546], [" UnitedArabEmirates ", 0, 303609], [" AnguillaUnitedKingdom ", 0, 16], [" BermudaUnitedKingdom ", 0, 691], [" BritishVirginIslandsUnitedKingdom ", 0, 114], [" CaymanIslandsUnitedKingdom ", 0, 390], [" ChannelIslandsUnitedKingdom ", 0, 3691], [" FalklandIslandsMalvinasUnitedKingdom ", 0, 41], [" GibraltarUnitedKingdom ", 0, 4114], [" IsleofManUnitedKingdom ", 0, 434], [" MontserratUnitedKingdom ", 0, 13], [" SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", 0, 4], [" TurksandCaicosIslandsUnitedKingdom ", 0, 1503], [" UnitedKingdom ", 0, 3817176], [" Uruguay ", 0, 41738], [" Uzbekistan ", 0, 78711], [" Vanuatu ", 0, 1], [" Venezuela ", 0, 126927], [" Vietnam ", 0, 1817], [" WestBankandGaza ", 0, 158962], [" Yemen ", 0, 2121], [" Zambia ", 0, 54217], [" Zimbabwe ", 0, 33388]]"""
        self.assertEqual(correctText, response.text, "For query with only type, Should be "+ correctText)

    # query with type and date for db confirmed
    def test_queries_date(self):
        # Ensure files are set up, if not already
        global q_setup
        if q_setup == False:
            setup_queries(self)
            q_setup = True

        response = requests.get(URL + '/info?type=confirmed&date=1/31/21')
        correctText = """[[" Afghanistan ", 55023], [" Albania ", 78127], [" Algeria ", 107339], [" Andorra ", 9937], [" Angola ", 19796], [" AntiguaandBarbuda ", 234], [" Argentina ", 1927239], [" Armenia ", 167026], [" AustralianCapitalTerritoryAustralia ", 118], [" NewSouthWalesAustralia ", 5110], [" NorthernTerritoryAustralia ", 98], [" QueenslandAustralia ", 1310], [" SouthAustraliaAustralia ", 596], [" TasmaniaAustralia ", 234], [" VictoriaAustralia ", 20449], [" WesternAustraliaAustralia ", 903], [" Austria ", 414398], [" Azerbaijan ", 230219], [" Bahamas ", 8174], [" Bahrain ", 103057], [" Bangladesh ", 535139], [" Barbados ", 1545], [" Belarus ", 248336], [" Belgium ", 710153], [" Belize ", 11908], [" Benin ", 3893], [" Bhutan ", 859], [" Bolivia ", 216835], [" BosniaandHerzegovina ", 121497], [" Botswana ", 21293], [" Brazil ", 9204731], [" Brunei ", 180], [" Bulgaria ", 218748], [" BurkinaFaso ", 10682], [" Burma ", 140145], [" Burundi ", 1632], [" CaboVerde ", 14070], [" Cambodia ", 466], [" Cameroon ", 29617], [" AlbertaCanada ", 124208], [" BritishColumbiaCanada ", 66779], [" DiamondPrincessCanada ", 0], [" GrandPrincessCanada ", 13], [" ManitobaCanada ", 29564], [" NewBrunswickCanada ", 1256], [" NewfoundlandandLabradorCanada ", 408], [" NorthwestTerritoriesCanada ", 35], [" NovaScotiaCanada ", 1580], [" NunavutCanada ", 294], [" OntarioCanada ", 272917], [" PrinceEdwardIslandCanada ", 111], [" QuebecCanada ", 262623], [" RepatriatedTravellersCanada ", 13], [" SaskatchewanCanada ", 23864], [" YukonCanada ", 70], [" CentralAfricanRepublic ", 4981], [" Chad ", 3376], [" Chile ", 727109], [" AnhuiChina ", 994], [" BeijingChina ", 1038], [" ChongqingChina ", 591], [" FujianChina ", 541], [" GansuChina ", 187], [" GuangdongChina ", 2125], [" GuangxiChina ", 267], [" GuizhouChina ", 147], [" HainanChina ", 171], [" HebeiChina ", 1313], [" HeilongjiangChina ", 1583], [" HenanChina ", 1303], [" HongKongChina ", 10452], [" HubeiChina ", 68150], [" HunanChina ", 1032], [" InnerMongoliaChina ", 366], [" JiangsuChina ", 694], [" JiangxiChina ", 935], [" JilinChina ", 551], [" LiaoningChina ", 400], [" MacauChina ", 47], [" NingxiaChina ", 75], [" QinghaiChina ", 18], [" ShaanxiChina ", 539], [" ShandongChina ", 866], [" ShanghaiChina ", 1698], [" ShanxiChina ", 238], [" SichuanChina ", 870], [" TianjinChina ", 344], [" TibetChina ", 1], [" UnknownChina ", 0], [" XinjiangChina ", 980], [" YunnanChina ", 231], [" ZhejiangChina ", 1316], [" Colombia ", 2094884], [" Comoros ", 2726], [" CongoBrazzaville ", 7887], [" CongoKinshasa ", 22771], [" CostaRica ", 193276], [" CotedIvoire ", 28399], [" Croatia ", 232426], [" Cuba ", 26686], [" Cyprus ", 31227], [" Czechia ", 984774], [" FaroeIslandsDenmark ", 654], [" GreenlandDenmark ", 30], [" Denmark ", 198472], [" DiamondPrincess ", 712], [" Djibouti ", 5932], [" Dominica ", 117], [" DominicanRepublic ", 214060], [" Ecuador ", 250828], [" Egypt ", 165951], [" ElSalvador ", 54966], [" EquatorialGuinea ", 5516], [" Eritrea ", 2135], [" Estonia ", 44208], [" Eswatini ", 15711], [" Ethiopia ", 137650], [" Fiji ", 55], [" Finland ", 45238], [" FrenchGuianaFrance ", 16083], [" FrenchPolynesiaFrance ", 18060], [" GuadeloupeFrance ", 9156], [" MartiniqueFrance ", 6370], [" MayotteFrance ", 8231], [" NewCaledoniaFrance ", 47], [" ReunionFrance ", 9996], [" SaintBarthelemyFrance ", 379], [" SaintPierreandMiquelonFrance ", 24], [" StMartinFrance ", 1289], [" WallisandFutunaFrance ", 5], [" France ", 3186354], [" Gabon ", 10748], [" Gambia ", 4090], [" Georgia ", 258111], [" Germany ", 2225659], [" Ghana ", 67010], [" Greece ", 156957], [" Grenada ", 148], [" Guatemala ", 159504], [" Guinea ", 14546], [" GuineaBissau ", 2634], [" Guyana ", 7641], [" Haiti ", 11533], [" HolySee ", 27], [" Honduras ", 147843], [" Hungary ", 367586], [" Iceland ", 6002], [" India ", 10757610], [" Indonesia ", 1078314], [" Iran ", 1417999], [" Iraq ", 619636], [" Ireland ", 196547], [" Israel ", 643435], [" Italy ", 2553032], [" Jamaica ", 15653], [" Japan ", 390740], [" Jordan ", 326855], [" Kazakhstan ", 235844], [" Kenya ", 100773], [" Kiribati ", 0], [" KoreaSouth ", 78508], [" Kosovo ", 60218], [" Kuwait ", 165257], [" Kyrgyzstan ", 84588], [" Laos ", 44], [" Latvia ", 66241], [" Lebanon ", 301052], [" Lesotho ", 8664], [" Liberia ", 1939], [" Libya ", 118631], [" Liechtenstein ", 2565], [" Lithuania ", 182543], [" Luxembourg ", 50388], [" MSZaandam ", 9], [" Madagascar ", 19065], [" Malawi ", 23963], [" Malaysia ", 214959], [" Maldives ", 15841], [" Mali ", 8091], [" Malta ", 17903], [" MarshallIslands ", 4], [" Mauritania ", 16635], [" Mauritius ", 569], [" Mexico ", 1864260], [" Micronesia ", 1], [" Moldova ", 159804], [" Monaco ", 1489], [" Mongolia ", 1814], [" Montenegro ", 61659], [" Morocco ", 471157], [" Mozambique ", 38654], [" Namibia ", 33944], [" Nepal ", 270959], [" ArubaNetherlands ", 6966], [" BonaireSintEustatiusandSabaNetherlands ", 196], [" CuracaoNetherlands ", 4585], [" SintMaartenNetherlands ", 1853], [" Netherlands ", 978475], [" CookIslandsNewZealand ", 0], [" NewZealand ", 2304], [" Nicaragua ", 6253], [" Niger ", 4517], [" Nigeria ", 131242], [" NorthMacedonia ", 92693], [" Norway ", 62966], [" Oman ", 134326], [" Pakistan ", 546428], [" Palau ", 0], [" Panama ", 320379], [" PapuaNewGuinea ", 851], [" Paraguay ", 133227], [" Peru ", 1138239], [" Philippines ", 525618], [" Poland ", 1513385], [" Portugal ", 720516], [" Qatar ", 151335], [" Romania ", 728743], [" Russia ", 3808348], [" Rwanda ", 15304], [" SaintKittsandNevis ", 37], [" SaintLucia ", 1195], [" SaintVincentandtheGrenadines ", 901], [" Samoa ", 2], [" SanMarino ", 3025], [" SaoTomeandPrincipe ", 1257], [" SaudiArabia ", 368074], [" Senegal ", 26523], [" Serbia ", 395263], [" Seychelles ", 1186], [" SierraLeone ", 3593], [" Singapore ", 59536], [" Slovakia ", 249913], [" Slovenia ", 166473], [" SolomonIslands ", 17], [" Somalia ", 4784], [" SouthAfrica ", 1453761], [" SouthSudan ", 3929], [" Spain ", 2743119], [" SriLanka ", 64157], [" Sudan ", 29380], [" SummerOlympics2020 ", 0], [" Suriname ", 8438], [" Sweden ", 566957], [" Switzerland ", 521320], [" Syria ", 14048], [" Taiwan ", 911], [" Tajikistan ", 13714], [" Tanzania ", 509], [" Thailand ", 19618], [" TimorLeste ", 70], [" Togo ", 5074], [" Tonga ", 0], [" TrinidadandTobago ", 7564], [" Tunisia ", 208885], [" Turkey ", 2477463], [" US ", 26312724], [" Uganda ", 39579], [" Ukraine ", 1261546], [" UnitedArabEmirates ", 303609], [" AnguillaUnitedKingdom ", 16], [" BermudaUnitedKingdom ", 691], [" BritishVirginIslandsUnitedKingdom ", 114], [" CaymanIslandsUnitedKingdom ", 390], [" ChannelIslandsUnitedKingdom ", 3691], [" FalklandIslandsMalvinasUnitedKingdom ", 41], [" GibraltarUnitedKingdom ", 4114], [" IsleofManUnitedKingdom ", 434], [" MontserratUnitedKingdom ", 13], [" SaintHelenaAscensionandTristandaCunhaUnitedKingdom ", 4], [" TurksandCaicosIslandsUnitedKingdom ", 1503], [" UnitedKingdom ", 3817176], [" Uruguay ", 41738], [" Uzbekistan ", 78711], [" Vanuatu ", 1], [" Venezuela ", 126927], [" Vietnam ", 1817], [" WestBankandGaza ", 158962], [" Yemen ", 2121], [" Zambia ", 54217], [" Zimbabwe ", 33388]]"""
        self.assertEqual(correctText, response.text, "For query with only type, Should be " + correctText)

    # query with type and country
    def test_queries_country(self):
        # Ensure files are set up, if not already
        global q_setup
        if q_setup == False:
            setup_queries(self)
            q_setup = True

        response = requests.get(URL + '/info?type=confirmed&country=Afghanistan')
        correctText = """[[" Afghanistan ", 0, 55023]]"""
        self.assertEqual(correctText, response.text, "For query with only type, Should be " + response.text)

    # query with type and country and date
    def test_queries_date_and_country(self):
        # Ensure files are set up, if not already
        global q_setup
        if q_setup == False:
            setup_queries(self)
            q_setup = True

        response = requests.get(URL + '/info?type=confirmed&date=1/31/21&country=Afghanistan')
        correctText = """[[" Afghanistan ", 55023]]"""
        self.assertEqual(correctText, response.text, "For query with only type, Should be " + response.text)

def setup_queries(tester):
    tester = app.test_client(tester)

    #add data
    files = {'file': open('./timeSeriesTools/two-date.csv','rb')}
    response = requests.post(URL+'/addNewCSV?type=confirmed', files=files)
    files.get('file').close()


    
if __name__ == "__main__":
    unittest.main()

